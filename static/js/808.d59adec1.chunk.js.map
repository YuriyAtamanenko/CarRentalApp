{"version":3,"file":"static/js/808.d59adec1.chunk.js","mappings":"sNAEaA,EAAgB,SAACC,GAAgB,OAAKA,EAAMC,QAAQC,OAAQ,E,kDCiB1D,SAASC,IACtB,IAAMC,GAAWC,EAAAA,EAAAA,MACXJ,GAAUK,EAAAA,EAAAA,IAAYP,GAC5BQ,GAAkCC,EAAAA,EAAAA,WAAS,GAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAzCI,EAASF,EAAA,GAAEG,EAAYH,EAAA,GAC9BI,GAAgCL,EAAAA,EAAAA,UAAS,GAAEM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAApCE,EAAQD,EAAA,GAAEE,EAAWF,EAAA,GAC5BG,GAA8CT,EAAAA,EAAAA,UAAwB,MAAKU,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAApEE,EAAeD,EAAA,GAAEE,EAAkBF,EAAA,IAE1CG,EAAAA,EAAAA,YAAU,WACRjB,GAASkB,EAAAA,EAAAA,KACX,GAAG,CAAClB,KAEJiB,EAAAA,EAAAA,YAAU,WACRN,GAAYd,EAAQsB,QAAUtB,EAAQsB,OAAS,EAC3CX,GAAa,GACbA,GAAa,EACnB,GAAG,CAACG,EAAUd,EAAQsB,SA4BtB,OACEC,EAAAA,EAAAA,MAACC,EAAAA,EAAS,CAAAC,SAAA,EACRC,EAAAA,EAAAA,KAACC,EAAAA,EAAM,CAACC,YAxBQ,SAAHC,GAKD,IAJdC,EAAYD,EAAZC,aACAC,EAAaF,EAAbE,cACAC,EAAWH,EAAXG,YACAC,EAASJ,EAATI,UAEMC,EAAYlC,EAAQmC,QACxB,SAAAC,GAAA,IAAGC,EAAID,EAAJC,KAAMC,EAAWF,EAAXE,YAAaC,EAAOH,EAAPG,QAAO,OAC3BF,EAAKG,SAASV,IACdW,OAAOH,EAAYI,MAAM,EAAGJ,EAAYhB,UAAYS,GACpDQ,GAAWP,GACXO,GAAWN,CAAS,IAGxBd,EAAmBe,GACnBvB,GAAa,EACf,IASKO,GACCQ,EAAAA,EAAAA,KAACiB,EAAAA,EAAW,CAAC3C,QAASkB,KAEtBQ,EAAAA,EAAAA,KAACiB,EAAAA,EAAW,CAAC3C,QAASA,EAAQ0C,MAAM,EAAG5B,KAExCJ,IAAagB,EAAAA,EAAAA,KAACkB,EAAAA,EAAW,CAACC,eAlCR,WACrB9B,GAAY,SAAA+B,GAAS,OAAIA,EAAY,CAAC,GACxC,IAqBS5B,GAA8C,IAA3BA,EAAgBI,SAYhBI,EAAAA,EAAAA,KAACqB,EAAAA,EAAqB,MAGpD,C","sources":["redux/Catalog/selectors.ts","pages/CatalogPage/CatalogPage.tsx"],"sourcesContent":["import { RootState } from 'redux/store';\n\nexport const selectCatalog = (state: RootState) => state.catalog.adverts;\n","import { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport CatalogList from 'components/Catalog/CatalogList/CatalogList';\nimport { getAll } from 'redux/Catalog/operations';\nimport { selectCatalog } from 'redux/Catalog/selectors';\nimport LoadMoreBtn from 'components/LoadMoreBtn/LoadMoreBtn';\nimport Filter from 'components/Filter/Filter';\nimport { Container } from 'components/App/App.styled';\nimport NotFoundFilterCatalog from 'components/NotFound/NotFoundFilterCatalog/NotFoundFilterCatalog';\nimport { ICar } from 'components/Catalog/CatalogItem/CatalogItem.types';\nimport { AppDispatch } from 'redux/store';\n\ninterface IFilter {\n  selectedMake: string;\n  selectedPrice: number;\n  fromMiliage: number;\n  toMiliage: number;\n}\n\nexport default function Catalog() {\n  const dispatch = useDispatch<AppDispatch>();\n  const catalog = useSelector(selectCatalog);\n  const [isShowBtn, setIsShowBtn] = useState(true);\n  const [pageCtrl, setPageCtrl] = useState(8);\n  const [filteredAdverts, setFilteredAdverts] = useState<ICar[] | null>(null);\n\n  useEffect(() => {\n    dispatch(getAll());\n  }, [dispatch]);\n\n  useEffect(() => {\n    pageCtrl >= catalog.length || catalog.length < 9\n      ? setIsShowBtn(false)\n      : setIsShowBtn(true);\n  }, [pageCtrl, catalog.length]);\n\n  const onShowNextPage = () => {\n    setPageCtrl(prevState => prevState + 8);\n  };\n\n  const onFiltering = ({\n    selectedMake,\n    selectedPrice,\n    fromMiliage,\n    toMiliage,\n  }: IFilter) => {\n    const filtering = catalog.filter(\n      ({ make, rentalPrice, mileage }) =>\n        make.includes(selectedMake) &&\n        Number(rentalPrice.slice(1, rentalPrice.length)) <= selectedPrice &&\n        mileage >= fromMiliage &&\n        mileage <= toMiliage\n    );\n\n    setFilteredAdverts(filtering);\n    setIsShowBtn(false);\n  };\n\n  const isFilteredAdverts = () => {\n    return filteredAdverts && filteredAdverts.length === 0;\n  };\n\n  return (\n    <Container>\n      <Filter onFiltering={onFiltering} />\n      {filteredAdverts ? (\n        <CatalogList catalog={filteredAdverts} />\n      ) : (\n        <CatalogList catalog={catalog.slice(0, pageCtrl)} />\n      )}\n      {isShowBtn && <LoadMoreBtn onShowNextPage={onShowNextPage} />}\n      {isFilteredAdverts() && <NotFoundFilterCatalog />}\n    </Container>\n  );\n}\n"],"names":["selectCatalog","state","catalog","adverts","Catalog","dispatch","useDispatch","useSelector","_useState","useState","_useState2","_slicedToArray","isShowBtn","setIsShowBtn","_useState3","_useState4","pageCtrl","setPageCtrl","_useState5","_useState6","filteredAdverts","setFilteredAdverts","useEffect","getAll","length","_jsxs","Container","children","_jsx","Filter","onFiltering","_ref","selectedMake","selectedPrice","fromMiliage","toMiliage","filtering","filter","_ref2","make","rentalPrice","mileage","includes","Number","slice","CatalogList","LoadMoreBtn","onShowNextPage","prevState","NotFoundFilterCatalog"],"sourceRoot":""}